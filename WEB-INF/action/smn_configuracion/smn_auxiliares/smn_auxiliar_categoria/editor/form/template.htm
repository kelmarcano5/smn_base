<!doctype html>
<html>

<head>

	<link rel="stylesheet" type="text/css" href="${def:context}/dinamica_bkp.css" />
		<link rel="stylesheet" type="text/css" href="${def:context}/main.css" />

	<!--biblioteca generica JS/Dinamica-->
	<script type="text/javascript" src="${def:context}/action/script">
	</script>

</head>

<body>

<!--banner-->
<div class="bannerDialog" id="encabezado_tabla">
	${lbl:b_auxiliary}
	<img src="${def:context}/images/close.png" class="button" onclick="parent.closeDialog(); parent.search();" title="${lbl:b_close_button}" style="float:right; cursor:pointer;">
	${req:progress}
</div>

<br>
<!--formulario addnew/edit-->
<form name="form1" onsubmit="return next()" style="width:500px;">

	<!-- titulo -->
	<h1 id="formTitle">${lbl:b_add_record}</h1>

	<table>

	<!--ancho de la columna de etiquetas-->
	<col width="30%">

	<!--campos-->
			<tr>
		<td>${lbl:b_auxiliary_class}*</td>
		<td>
			<select name="aca_naturaleza_auxiliar" id="aca_naturaleza_auxiliar" onchange="chgCombo(aca_naturaleza_auxiliar.options[aca_naturaleza_auxiliar.selectedIndex].text,'aca_naturaleza_auxiliar_name');">
				<option value="">[${lbl:b_choose}]</option>
				<aca_naturaleza_auxiliar_rows>
				<option value="${fld:id}">${fld:item}</option>

				</aca_naturaleza_auxiliar_rows>
			</select>
			<input id="aca_naturaleza_auxiliar_name" name="aca_naturaleza_auxiliar_name" type="hidden">
		</td>
	</tr>
		<tr>
			<td>${lbl:b_kind_of_person}*</td>
			<td>
				<select name="aca_tipo_persona" id="aca_tipo_persona">
				<option value="">[${lbl:b_choose}]</option>
				<option value="PN">${lbl:b_natural_person}</option>
				<option value="PJ">${lbl:b_legal_person}</option>
				<option value="GO">${lbl:b_government_person}</option>

				</select>
			</td>
		</tr>
	<tr>
		<td>${lbl:b_entity}</td>
		<td>
			<select name="aca_empresa" id="aca_empresa" onchange="chgCombo(aca_empresa.options[aca_empresa.selectedIndex].text,'aca_empresa_name');">
				<option value="">[${lbl:b_choose}]</option>
				<aca_empresa_rows>
				<option value="${fld:id}">${fld:item}</option>

				</aca_empresa_rows>
			</select>
			<input id="aca_empresa_name" name="aca_empresa_name" type="hidden">
		</td>
	</tr>
	<tr>
		<td>${lbl:b_subsidiary}</td>
		<td>
			<select name="aca_sucursal" id="aca_sucursal" onchange="chgCombo(aca_sucursal.options[aca_sucursal.selectedIndex].text,'aca_sucursal_name');">
				<option value="">[${lbl:b_choose}]</option>
				<aca_sucursal_rows>
				<option value="${fld:id}">${fld:item}</option>

				</aca_sucursal_rows>
			</select>
			<input id="aca_sucursal_name" name="aca_sucursal_name" type="hidden">
		</td>
	</tr>
	<tr>
		<td>${lbl:b_business_unit}</td>
		<td>
			<select name="aca_unidad_negocio" id="aca_unidad_negocio" onchange="chgCombo(aca_unidad_negocio.options[aca_unidad_negocio.selectedIndex].text,'aca_unidad_negocio_name');">
				<option value="">[${lbl:b_choose}]</option>
				<aca_unidad_negocio_rows>
				<option value="${fld:id}">${fld:item}</option>

				</aca_unidad_negocio_rows>
			</select>
			<input id="aca_unidad_negocio_name" name="aca_unidad_negocio_name" type="hidden">
		</td>
	</tr>
	<tr>
		<td>${lbl:b_service_area}</td>
		<td>
			<select name="aca_area_servicio" id="aca_area_servicio" onchange="chgCombo(aca_area_servicio.options[aca_area_servicio.selectedIndex].text,'aca_area_servicio_name');">
				<option value="">[${lbl:b_choose}]</option>
				<aca_area_servicio_rows>
				<option value="${fld:id}">${fld:item}</option>

				</aca_area_servicio_rows>
			</select>
			<input id="aca_area_servicio_name" name="aca_area_servicio_name" type="hidden">
		</td>
	</tr>
	<tr>
		<td>${lbl:b_service_unit}</td>
		<td>
			<select name="aca_unidad_servicio" id="aca_unidad_servicio" onchange="chgCombo(aca_unidad_servicio.options[aca_unidad_servicio.selectedIndex].text,'aca_unidad_servicio_name');">
				<option value="">[${lbl:b_choose}]</option>
				<aca_unidad_servicio_rows>
				<option value="${fld:id}">${fld:item}</option>

				</aca_unidad_servicio_rows>
			</select>
			<input id="aca_unidad_servicio_name" name="aca_unidad_servicio_name" type="hidden">
		</td>
	</tr>


	</table>

	<!--botones-->
	<input id="siguiente" type="submit" value="${lbl:b_next_button}" class="button">
	<input id="limpiar" type="button" value="${lbl:b_clean_button}" onclick="addNew()" class="button">
	<input id="copiar" type="button" value="${lbl:b_copy_button}" onclick="getFormValuesToCopy('form1')" class="button">
	<input id="pegar" type="button" value="${lbl:b_paste_button}" onclick="getFormValuesToPaste('form1')" class="button">
	<input id="salir" type="button" value="${lbl:s_exit}" onclick="parent.closeDialog(); parent.search();" class="button">

	<!-- PK-->
<input type="hidden" name="id" value="">

</form>

<!--codigo de soporte del template-->
<script type="text/javascript">

	onload = function()
	{
		//alert('${fld:flag}');
		if('${fld:flag}'=='true')
		{
			//alert('flag = true');
			ajaxCall(httpMethod="GET",
						uri="${def:actionroot}/back",
						divResponse=null,
						divProgress="status",
						formName=null,
						afterResponseFn=null,
						onErrorFn=null);
		}
		//Esto siempre hay que hacerlo antes de la funcion addnew

		addNew();
	}

	function chgCombo(text,id)
	{
		document.getElementById(id).value = text;
	}

	//configurar formulario para ingresar registro nuevo
	function addNew()
	{
		document.getElementById("formTitle").innerHTML = "${lbl:b_add_record}";
		document.getElementById("siguiente").disabled=false;
		clearForm("form1");
		setFocusOnForm("form1");
	}

	//retorna al estado previo que corresponde
	//al estado actual de la pagina, cada llamada Ajax
	//se encarga de definir cual es la funcion de goBack() que aplica
	function goBack()
	{
		_goBackFn()
	}

	//mostrar la actualizacion de un registro
	function next()
	{
		clearErrorMessages();
		document.getElementById("siguiente").disabled=true;

		//llamada Ajax...
		return ajaxCall(httpMethod="POST",
						uri="${def:actionroot}/next",
						divResponse=null,
						divProgress="status",
						formName="form1",
						afterResponseFn=null,
						onErrorFn=retryAddnewOrEdit);
	}

	function getAuxiliaryClass()
	{
		var auxClass = document.getElementById("aca_naturaleza_auxiliar_name");
		//alert('getAuxiliaryClass - '+auxClass.value)
		return auxClass.value;
	}

	//restaurar el formulario en caso de error
	function retryAddnewOrEdit() {
		document.getElementById("siguiente").disabled=false;
		setFocusOnForm("form1");
	}

	var id = "${fld:id}"

	//muestra un DIV+IFRAME con el formulario de CRUD para los combos
	function claseauxiliar()
	{
		//alert('Colocar su c�digo aqu�.')

		var uri = "${def:context}/action/smn_configuracion/smn_auxiliares/smn_naturaleza_auxiliar/editor/form";
		openDialog("editor22", uri, 580, 180);
	}

</script>
</body>
</html>
